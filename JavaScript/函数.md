#函数
当代码出现有规律的重复的时候，我们可能就需要对已有的逻辑进行适当的抽象，函数就是最基本的一种代码抽象方式。
##函数的定义和调用
在JavaScript中，定义函数的方式：
<pre><code>function abs(x){
    if(x >= 0){
        return x;
    }else{
        return -x;
    }
}</code></pre>
上述abs()函数的定义如下：
1.function指出这是一个函数的定义；
2.abs是函数名称；
3.(x)括号内列出的是函数的参数，多个参数以，分隔；
4.{...}之间的代码是函数体，可以包含若干的语句，甚至可以没有任何语句。
请注意，*函数体内部的语句在执行时，一旦执行到return时，函数就执行完毕，并将结果返回。*因此，函数内部通过条件判断和循环可以实现非常复杂的逻辑。
如果没有return语句，函数执行完毕后也会返回结果，只是结果为undefined。
由于JavaScript的函数也是一个对象，上述定义的abs()函数实际上是一个函数对象，而函数名abs可以视为指向该函数的变量。
因此，第二种定义函数的方式如下：
<pre><code>var abs = function(x){
    if(x >= 0){
        return x;
    }else{
        return -x;
    }
}</code></pre>
在这种情况下，function(x){...}是一个匿名函数，它没有函数名，但是这个匿名函数赋值给了变量abs，所以，可以通过变量abs就可以调用该函数。
###调用函数
调用函数时，按顺序传入参数即可：
>略

由于JavaScript允许传入任意参数而不影响调用，因此传入的参数比定义的参数多也没有问题，虽然函数内部并不需要这些参数。
>略

传入的参数比定义的少也没有问题:
<pre><code>abs(); // 返回NaN</code></pre>
此时abs(x)函数的参数x将收到undefined，计算的结果为NaN。
要避免收到undefined，可以对参数进行检查：
<pre><code>function abs(x){
    if(typeof x !== 'number'){
        throw 'Not a number';
    }
    if(x >= 0){
        return x;
    }else{
        return -x;
    }
}</code></pre>
###arguments
JavaScript还有一个免费赠送的关键字arguments，它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。arguments类似Array，但不是一个Array。
<pre><code>function foo(x){
    alert(x); // 10
    for (var i = 0;i < arguments.length;i++){
        alert(arguments[i]); // 10,20,30
    }
}
foo(10,20,30);</code></pre>
利用arguments，你可以获得调用者传入的所有的参数，也就是说，即时不定义任何的参数，还是可以拿到参数的值的
>略

实际上arguments最常用于判断传入参数的个数：
```javascript
//接受2-3个参数，b是可选参数，如果之传入2个参数，b默认为null；
function foo(a,b,c){
    if(arguments.length === 2){
        //实际拿到的参数是a和b，c为undefined
        c = b;
        b = null;
    }
}
```
要把中间的参数b变为可选参数，就只能通过arguments判断，然后重新调整参数赋值。
###rest参数
由于JavaScript函数允许接受任意个参数，浴室我们就不得不用arguments来获取所有的参数:
```javascript
function foo(a,b){
    var i, rest = [];
    if(arguments.length>2){
        for(i = 2;i < arguments.length;i++){
            rest.push(arguments[i]);
        }
        console.log('a = '+a);
        console.log('b = '+b);
        console.log(rest);
    }
}
```
为了获取除了已定义参数a,b之外的参数，我们不得不用arguments，并且循环要从索引2开始以便排除前两个参数，这种写法很别扭，只是为了获得额外的rest参数。
在ES6中引入了rest参数，上面的函数可以写成:
```javascript
function foo(a,b, ...rest){
        console.log('a = '+a);
        console.log('b = '+b);
        console.log(rest);
}
foo(1,2,3,4,5);// 结果a = 1,b = 2, Array [3,4,5]
foo(1); // a = 1,b = undefined, Array[]
```
rest参数只能写在最后，前面用...标识，从运行结果可知，传入的参数先绑定a,b,多余的参数以数组形式交给变量rest，所以，不再需要arguments我们就可以获取了全部的参数。
如果传入的参数连正常定义参数都没有填满，也不要紧，rest参数会接受一个空数组（注意不是undefined）。

###小心你的return语句
前面我们提到了JavaScript引擎有一个在行末尾自动添加分号的机制，所以需要注意return语句的分行。

##变量的作用域
在JavaScript中，用var申明的变量实际上是有作用域的。
如果一个变量在函数体内部申明，则该变量的作用域为整个函数的整体，在函数体外不可引用该变量：
```javascript
'use strict'
function foo(){
    var x = 1;
    x = x + 1;
}
x = x + 2; // refreenceError,无法在函数体外引用变量x
```
如果两个不同函数各自申明了同一个变量，那么该变量只在各自的函数体内起作用，换句话说。不同函数内部的同名变量互相独立，互不影响。
>略

由于JavaScript的函数可以嵌套，此时，内部函数可以访问外部函数定义的变量，反过来则不行：
```javascript
'use strict'
function foo(){
    var x = 1;
    function bar(){
        var y = x + 1; // bar可以访问foo中x的值
    }
    var z = y + 1; // refreenceError,foo不可以访问bar的变量y
}
```
如果内部函数和外部函数的变量重名怎么办？
```javascript
'use strict'
function foo(){
    var x = 1;
    function bar(){
        var x = 'A';
        x; // x = 'A';
    }
    x; // x =1;
}
```
这说明JavaScript的函数在查找变量时从自身函数定义开始，从内向外查找。如果内部函数定义与外部函数重名的变量，则内部函数的变量的将屏蔽外部函数的变量。

